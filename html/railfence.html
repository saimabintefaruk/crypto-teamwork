<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Rail Fence Cipher - Navigation Header</title>
  <link href="https://fonts.googleapis.com/css2?family=Dancing+Script&family=Poppins:wght@400;600;700&display=swap" rel="stylesheet" />
  <style>
    /* Reset & body */
    body {
      margin: 0;
      font-family: 'Poppins', sans-serif;
      background: #e9f5ff;
      color: #2a3b4c;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 0 15px 50px;
    }

    /* Sticky header with navigation */
    header {
      position: sticky;
      top: 0;
      width: 100%;
      max-width: 900px;
      background: linear-gradient(135deg, #a2d8ff, #59a3ff);
      border-radius: 0 0 60px 60px;
      box-shadow: 0 6px 20px rgba(130, 195, 255, 0.5);
      padding: 15px 20px 25px;
      color: white;
      z-index: 1000;
    }

    .nav-container {
      display: flex;
      justify-content: space-between;
      align-items: center;
      flex-wrap: wrap;
      gap: 10px;
    }

    .logo-title {
      display: flex;
      align-items: center;
      gap: 15px;
    }

    .logo-title img {
      max-height: 50px;
      border-radius: 10px;
      box-shadow: 0 3px 8px rgba(0,0,0,0.15);
    }

    .logo-title h1 {
      font-family: 'Dancing Script', cursive;
      font-weight: 700;
      font-size: 1.9rem;
      margin: 0;
      letter-spacing: 2px;
      user-select: none;
      text-shadow: 0 0 8px #dcf1ff;
    }

    nav {
      display: flex;
      gap: 18px;
      flex-wrap: wrap;
      align-items: center;
      font-weight: 600;
      font-size: 1rem;
      user-select: none;
    }

    nav a {
      color: white;
      text-decoration: none;
      padding: 6px 12px;
      border-radius: 14px;
      transition: background-color 0.3s ease;
    }

    nav a:hover, nav a.active {
      background-color: #3b94e0;
      box-shadow: 0 0 12px #3b94e0cc;
    }

    .nav-arrows {
      display: flex;
      gap: 15px;
      align-items: center;
    }

    .nav-arrows button {
      background: transparent;
      border: 2px solid white;
      color: white;
      padding: 6px 12px;
      border-radius: 12px;
      font-weight: 700;
      cursor: pointer;
      user-select: none;
      transition: background-color 0.3s ease;
    }

    .nav-arrows button:hover {
      background-color: #3b94e0;
      border-color: #3b94e0;
      box-shadow: 0 0 10px #3b94e0cc;
    }

    /* Main content styling */
    main {
      width: 100%;
      max-width: 600px;
      background: #ffffff;
      padding: 30px 25px;
      border-radius: 30px;
      box-shadow: 0 6px 16px #aad6ff88;
      margin-top: 30px;
      margin-bottom: 60px;
    }

    main h2 {
      text-align: center;
      font-size: 2rem;
      margin-bottom: 25px;
      letter-spacing: 1.2px;
    }

    /* Inputs, buttons etc. (same as before) */
    label {
      display: block;
      font-weight: 600;
      margin-bottom: 8px;
      font-size: 1.1rem;
    }

    input[type="text"],
    input[type="number"],
    textarea {
      width: 100%;
      padding: 12px 15px;
      margin-bottom: 20px;
      border-radius: 12px;
      border: 1.8px solid #99cfff;
      font-size: 1rem;
      font-family: inherit;
      resize: vertical;
      transition: border-color 0.3s ease;
    }

    input:focus,
    textarea:focus {
      outline: none;
      border-color: #5aaeff;
      box-shadow: 0 0 8px #5aaeffaa;
    }

    button.action-btn {
      background-color: #5aaeff;
      color: white;
      border: none;
      padding: 12px 30px;
      margin: 10px 15px 10px 15px;
      border-radius: 18px;
      cursor: pointer;
      font-weight: 600;
      font-size: 1.1rem;
      box-shadow: 0 5px 15px #5aaeffbb;
      transition: background-color 0.3s ease, box-shadow 0.3s ease;
      min-width: 120px;
    }

    button.action-btn:hover {
      background-color: #3b94e0;
      box-shadow: 0 7px 20px #3b94e0cc;
    }

    #outputPassword, #outputName {
      background: #e3f2ff;
      color: #0e2d4d;
      font-weight: 600;
      margin-bottom: 20px;
    }

    footer {
      width: 100%;
      max-width: 900px;
      padding: 25px 20px;
      background: #b4e1ffcc;
      border-radius: 40px 40px 0 0;
      box-shadow: 0 -6px 20px rgba(173, 221, 255, 0.5);
      text-align: center;
      color: #21598e;
      font-weight: 600;
      margin-top: 30px;
      letter-spacing: 1px;
    }

    footer .team-info {
      margin-top: 10px;
      display: flex;
      justify-content: center;
      gap: 30px;
      flex-wrap: wrap;
      font-family: 'Dancing Script', cursive;
      font-size: 1.1rem;
      color: #1a4b77;
    }

    @media (max-width: 600px) {
      header {
        padding: 10px 15px 20px;
      }

      .logo-title h1 {
        font-size: 1.5rem;
      }

      .logo-title img {
        max-height: 40px;
      }

      nav {
        font-size: 0.9rem;
      }

      main {
        padding: 20px 15px;
      }

      button.action-btn {
        width: 48%;
        margin-bottom: 15px;
      }
    }
  </style>
</head>
<body>

  <header>
    <div class="nav-container">
      <div class="logo-title">
        <img src="../images/logo.jpg" alt="Cipher Logo" />
        <h1>Cyber Ciphers</h1>
      </div>
      <nav>
        <a href="../index.html">Home</a>
        <a href="../html/playfair.html">Playfair</a>
        <a href="..html/railfence.html" class="active">Rail Fence</a>
        <a href="../html/vernam.html">Vernam</a>
        <a href="../html/aes.html">AES</a>
      </nav>
      <div class="nav-arrows">
        <button onclick="location.href='playfair.html'">&larr; Prev</button>
        <button onclick="location.href='vernam.html'">Next &rarr;</button>
      </div>
    </div>
  </header>

  <main>
    <h2>Rail Fence Cipher Tool</h2>

    <label for="password">Password:</label>
    <input type="text" id="password" placeholder="Enter password" />

    <label for="name">Name:</label>
    <input type="text" id="name" placeholder="Enter name" />

    <label for="rails">Number of Rails:</label>
    <input type="number" id="rails" min="2" max="10" value="3" />

    <div style="text-align:center;">
      <button class="action-btn" onclick="encrypt()">Encrypt</button>
      <button class="action-btn" onclick="decrypt()">Decrypt</button>
    </div>

    <label for="outputPassword">Encrypted/Decrypted Password:</label>
    <textarea id="outputPassword" rows="3" readonly></textarea>

    <label for="outputName">Encrypted/Decrypted Name:</label>
    <textarea id="outputName" rows="3" readonly></textarea>
  </main>

  <footer>
    <div>Made with ðŸ’™ by:</div>
    <div class="team-info">
      <span>Safa - 2122020037</span>
      <span>Juhee - 2122020016</span>
      <span>Saima - 2122020039</span>
    </div>
  </footer>

  <script>
    // Rail Fence Cipher Encrypt
    function railFenceEncrypt(text, rails) {
      if (rails === 1) return text;
      let fence = new Array(rails).fill('').map(() => []);
      let rail = 0;
      let direction = 1;

      for (let char of text) {
        fence[rail].push(char);
        rail += direction;
        if (rail === 0 || rail === rails - 1) direction *= -1;
      }

      return fence.flat().join('');
    }

    // Rail Fence Cipher Decrypt
    function railFenceDecrypt(cipher, rails) {
      if (rails === 1) return cipher;
      let len = cipher.length;
      let fence = new Array(rails).fill(null).map(() => new Array(len).fill(null));

      let rail = 0;
      let direction = 1;

      // Mark the positions to fill
      for (let i = 0; i < len; i++) {
        fence[rail][i] = '*';
        rail += direction;
        if (rail === 0 || rail === rails - 1) direction *= -1;
      }

      let index = 0;
      // Fill the fence with cipher characters
      for (let r = 0; r < rails; r++) {
        for (let c = 0; c < len; c++) {
          if (fence[r][c] === '*' && index < len) {
            fence[r][c] = cipher[index++];
          }
        }
      }

      // Read the fence to get the plaintext
      let result = '';
      rail = 0;
      direction = 1;
      for (let i = 0; i < len; i++) {
        result += fence[rail][i];
        rail += direction;
        if (rail === 0 || rail === rails - 1) direction *= -1;
      }
      return result;
    }

    function encrypt() {
      const password = document.getElementById('password').value.trim();
      const name = document.getElementById('name').value.trim();
      const rails = parseInt(document.getElementById('rails').value);

      if (!password || !name) {
        alert('Please enter both password and name.');
        return;
      }
      if (!rails || rails < 2) {
        alert('Please enter a valid number of rails (at least 2).');
        return;
      }

      const encryptedPassword = railFenceEncrypt(password, rails);
      const encryptedName = railFenceEncrypt(name, rails);

      document.getElementById('outputPassword').value = encryptedPassword;
      document.getElementById('outputName').value = encryptedName;
    }

    function decrypt() {
      const cipherPassword = document.getElementById('password').value.trim();
      const cipherName = document.getElementById('name').value.trim();
      const rails = parseInt(document.getElementById('rails').value);

      if (!cipherPassword || !cipherName) {
        alert('Please enter both ciphered password and name.');
        return;
      }
      if (!rails || rails < 2) {
        alert('Please enter a valid number of rails (at least 2).');
        return;
      }

      const decryptedPassword = railFenceDecrypt(cipherPassword, rails);
      const decryptedName = railFenceDecrypt(cipherName, rails);

      document.getElementById('outputPassword').value = decryptedPassword;
      document.getElementById('outputName').value = decryptedName;
    }
  </script>
</body>
</html>
